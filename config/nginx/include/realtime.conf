location /realtime/socket {
    proxy_pass $forward_scheme://$server:41236/socket.io/socket.io.js$request_uri$is_args$args;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection $connection_upgrade;
    add_header       X-Served-By $host;
    proxy_set_header Host $host;
    proxy_set_header X-Forwarded-Scheme $scheme;
    proxy_set_header X-Forwarded-Proto  $scheme;
    proxy_set_header X-Forwarded-For    $proxy_add_x_forwarded_for;
    proxy_set_header X-Real-IP          $remote_addr;
    proxy_redirect http:// $scheme://;
}

location /realtime {
    proxy_pass $forward_scheme://$server:41236$request_uri$is_args$args;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection $connection_upgrade;
    add_header       X-Served-By $host;
    proxy_set_header Host $host;
    proxy_set_header X-Forwarded-Scheme $scheme;
    proxy_set_header X-Forwarded-Proto  $scheme;
    proxy_set_header X-Forwarded-For    $proxy_add_x_forwarded_for;
    proxy_set_header X-Real-IP          $remote_addr;
    proxy_redirect http:// $scheme://;
}

location /realtime/api/realtime {
    proxy_pass $forward_scheme://$server:41236/api/realtime$is_args$args;
    add_header       X-Served-By $host;
    proxy_set_header Host $host;
    proxy_set_header X-Forwarded-Scheme $scheme;
    proxy_set_header X-Forwarded-Proto  $scheme;
    proxy_set_header X-Forwarded-For    $proxy_add_x_forwarded_for;
    proxy_set_header X-Real-IP          $remote_addr;
    proxy_set_header x-api-token $http_x_api_token;  # Forward x-api-token header
    proxy_set_header x-api-userid $http_x_api_userid;  # Forward x-api-userid header
    proxy_redirect http:// $scheme://;
}

location /realtime/api/users-categories {
    proxy_pass $forward_scheme://$server:41236/api/users-categories$is_args$args;
    add_header       X-Served-By $host;
    proxy_set_header Host $host;
    proxy_set_header X-Forwarded-Scheme $scheme;
    proxy_set_header X-Forwarded-Proto  $scheme;
    proxy_set_header X-Forwarded-For    $proxy_add_x_forwarded_for;
    proxy_set_header X-Real-IP          $remote_addr;
    proxy_set_header x-api-token $http_x_api_token;  # Forward x-api-token header
    proxy_set_header x-api-userid $http_x_api_userid;  # Forward x-api-userid header
    proxy_redirect http:// $scheme://;
}

location /realtime/api/users {
    proxy_pass $forward_scheme://$server:41236/api/users$is_args$args;
    add_header       X-Served-By $host;
    proxy_set_header Host $host;
    proxy_set_header X-Forwarded-Scheme $scheme;
    proxy_set_header X-Forwarded-Proto  $scheme;
    proxy_set_header X-Forwarded-For    $proxy_add_x_forwarded_for;
    proxy_set_header X-Real-IP          $remote_addr;
    proxy_set_header x-api-token $http_x_api_token;  # Forward x-api-token header
    proxy_set_header x-api-userid $http_x_api_userid;  # Forward x-api-userid header
    proxy_redirect http:// $scheme://;
}

location /realtime/api/realtime-spaces {
    proxy_pass $forward_scheme://$server:41236/api/realtime-spaces$is_args$args;
    add_header       X-Served-By $host;
    proxy_set_header Host $host;
    proxy_set_header X-Forwarded-Scheme $scheme;
    proxy_set_header X-Forwarded-Proto  $scheme;
    proxy_set_header X-Forwarded-For    $proxy_add_x_forwarded_for;
    proxy_set_header X-Real-IP          $remote_addr;
    proxy_set_header x-api-token $http_x_api_token;  # Forward x-api-token header
    proxy_set_header x-api-userid $http_x_api_userid;  # Forward x-api-userid header
    proxy_redirect http:// $scheme://;
}


location /socket.io {
    proxy_pass $forward_scheme://$server:41236/socket.io/$is_args$args;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection $connection_upgrade;
    add_header X-Served-By $host;
    proxy_set_header Host $host;
    proxy_set_header X-Forwarded-Scheme $scheme;
    proxy_set_header X-Forwarded-Proto $scheme;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_redirect http:// $scheme://;
}